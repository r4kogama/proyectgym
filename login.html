<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="description" content="Fitness">
	 <!-- Mobile viewport -->
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
	<link rel="icon" href="img/" type="image/png" sizes="16x16">
	 <!-- CSS-->
	<link href="css/reset.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" 	href="css/font-awesome.min.css">
	<link href="css/index.css" rel="stylesheet" type="text/css">
	<link href="css/main.css" rel="stylesheet" type="text/css">
	<!-- JS-->
	 <script src="js/slideout-1.0.1/dist/slideout.min.js" type="text/javascript"></script>
	
	<title>gym</title>
</head>
<body>
	<header>
    <nav id="menu" class="menu-oculto">
       	<ul>
       		<li><a href="#">Home</a></li>
       		<li><a href="#">pag2</a></li>
       		<li><a href="#">pag3</a></li>
       		<li><a href="#">pag4</a></li>
       		<li><a href="#">contact</a></li>
       	</ul>
    </nav>
	</header>
    <main id="main" class="panel panel-header principal">
      <div>
        <button class="btn-hamburger toggle-button js-slideout-toggle">☰</button>
        <h2>Menu</h2>
      </div>
      <div id="logo">
      	<img src="" alt="logo">
      	<h1>PRO<span>FITNESS</span></h1>
      </div>
      <div id="log" class="btn-login">
      	<h2>LOGIN</h2>
      </div>
      <div id="cesta" class="btn-cesta"></div>
      <div class="ctn-articulo">0</div>
      <section id="clientenuevo">
      	<h2>Nueva cuenta</h2>
      	<p>Crea tu cuenta de PROFITNESS</p>
      	<button class="btn-cuenta">Crear una cuenta</button>
      	<div class="contenedor-formulario">
      	<form action="registro.php" method="post" id="formreg" class="formreg" onSubmit="validaSubmit(event)">
      		<section class="info-personal">
				<h3>Informacion Personal</h3>
				<ul>
					<li  class="in-name">
						<label for="nombre">Nombre:<span>*</span></label>
						<input type="text"  name="nom" onBlur="validarNombre(this)" id="nombre" value="" required>
						<span class="errornom"></span>
					</li>
					<li class="in-lastname">
						<label for="apellido">Apellidos:<span>*</span></label>
						<input type="text"  name="lastname"  onBlur="validarApellido(this)" id="apellido" value=""required>
						<span class="errorlast"></span>

					</li>
					<li class="year">
						<label for="años">Edad:<span>*</span></label>
						<input type="date"  onBlur="validarEdad(this)" name="edad" id="años" required>
						<span class="erroredad"></span>
					</li>
					<li class="sex">
						<label for="men">Hombre:</label>
						<input type="radio" name="sexo" id="men" value="H">
						<label for="woman">Mujer:</label>
						<input type="radio" name="sexo" id="woman" value="M">
					</li>
				</ul>	
			</section>
			<section class="info-credencial">
				<h3>Informacion Cuenta</h3>
				<ul>
					<li class="mail">
						<label for="email">Direccion Email:<span>*</span></label>
						<input type="text" class="inLow" onBlur="validarEmail(this)" name="mail" id="email" value="" required>
						<span class="errormail"></span>
					</li>
					<li class="pass">
						<label for="pass">Password<span>*</span></label>
						<input type="password" name="pass" onkeyup="validarPass(this)"  id="pass" value="" required>
						<span class="errorpass"></span>
						<span class="errorpass"></span>
						<span class="errorpass"></span>
						<span class="errorpass"></span>
					</li>
					<li class="repass">
						<label for="pass">Confirmar password:<span>*</span></label>
						<input type="password" name="repass" onBlur="repPass(this)" disabled id="repass" value="" required>
						<span class="errorpass"></span>
					</li>
					<li>
						<input type="checkbox" onclick="comprobarCheck(this)" name="privacidad" id="privacidad" value="" />
						<p>Acepta terminos y <a href="#">condiciones</a></p>
						<span class="errorcheck"></span>
					</li>
				</ul>
			</section>
			<button type="submit" name="cuenta">Crear cuenta</button>
    	</form>
      	</div>
      </section>
      <section id="separador">
      	<h2>PRO<span>FITNESS</span></h2>
      </section>
      <section id="cliente">
		  <form action="login.php" method="post">
				<ul>
				  <li class="mail">
						<label for="email">Direccion Email:<span>*</span></label>
						<input type="email" class="inLow" name="email" id="email-log" onBlur="validarEmail(this)" value="">
						<span class="errormail"></span></li>
				  <li class="pass"><label for="pass">Password<span>*</span></label>
						<input type="password" name="plog" id="pass-log" onkeyup="validarPass(this)" value="">
						<span class="errorpass1 errorpass2"></span>
				  </li>
				</ul>
				<div class="remember">
					<input type="checkbox" id="checkregistro" name="recordar" >Recuerdame
				</div>	
				<button type="submit"  name="signin">Entrar</button>
				<a href="#">Has olvidado la contraseña?</a>
		  </form>
      </section>
    </main>
	<footer id="info-foot "class="panel-footer">
	</footer>
	
	 <script src="js/slideout-1.0.1/slidetoogle.js" type="text/javascript"></script>
	 <script>

		 //boton cuenta
		  var btncuenta = document.getElementsByClassName("btn-cuenta")[0];
		  btncuenta.onclick = function() {toggleregistro()};

		  function toggleregistro(){
			document.getElementsByClassName("formreg")[0].classList.toggle("showform");
		  }
		  
		//mayusculas a minusculas
		var inputclass = document.getElementsByClassName("inLow");
		function minuscula(){
			for(var i = 0; i < inputclass.length;i++){
				inputclass[i].value = inputclass[i].value.toLowerCase();
			}
		}

		for (var i = 0; i < inputclass.length; i++) {
			inputclass[i].addEventListener('keyup', minuscula,false);
		}

		//validar nombre
		 function validarNombre(input){
			 if(input != undefined){
			   var exp =/^[a-z\d_]{4,15}$/i;
			   var msg1 = input.parentElement.querySelectorAll("span")[1];
				   if(input.name == "nom"){
					   if(exp.test(input.value) == false){
						   msg1.innerHTML = "Minimo 3 letras";
						   return false;
					   }else{
						   msg1.innerHTML = "correcto";
					   }
				   }
			   }		
	   }
	   //validar apellido
	   function validarApellido(input)	{
		   if(input != undefined){
			   var exp =/^[a-z\d_]{6,49}$/i;
			   var msg2 = input.parentElement.querySelectorAll("span")[1];
			   if(input.name == "lastname"){
				   if(exp.test(input.value) == false){
					   msg2.innerHTML = "Escribe el apellido completo";
					   return false;
				   }else{
					   msg2.innerHTML = "correcto";
				   }
			   }
		   }
	   }
		 
	   //validar edad
	   function validarEdad(input){		
			   if(input != undefined){
				   debugger;
				   var msg3 = input.parentElement.querySelectorAll("span")[1];
				   if(input.name == "edad"){
					   if(input.value == ""){
						   msg3.innerHTML = "Indica tu edad";
						   return false;
					   }else{
						   msg3.innerHTML = "correcto";
					   }
				   }
			   }
	   }

		//validar check
	   function comprobarCheck(input) {
			var msg =  input.parentElement.querySelector("span");
				if(input.checked == true){
					msg.innerHTML = "";
				}else{
					msg.style.color = "tomato";
					msg.innerHTML = "Acepta las condiciones para continuar";
					return false;
				}
		}	

	   //validar email
	   function validarEmail(input){
		   var expr = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/;
		   var msg = input.parentElement.querySelectorAll("span")[1]; 
		   if(input.name == "mail"){
			   if(expr.test(input.value) ==  false){
				   msg.innerHTML = "Introduce un email valido";
				   //se ha introducido mal el mail
				   return false;
			   }else{
				   msg.innerHTML ="";
			   }
		   }
		   //es correcto
		   return true;
	   }

	   //validar pass
	   var  enablepass = document.getElementById("repass");
	   var inputpass = document.getElementById("pass");
	   inputpass.onblur = function() {
		   console.log('onblur');
		   var exp = /(?=^.{6,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/;
		   var msg = inputpass.parentElement.querySelectorAll("span")[1];
			   if(exp.test(inputpass.value) ==  false){
					msg.style.color = "tomato";
				   msg.innerHTML = "Password invalido";
				   //se ha introducido mal el pass
				   return false;
			   }else{
					msg.style.color = "#4CAF50";
				   msg.innerHTML ="Valido";
				   enablepass.disabled= false;	
					return inputpass.value;
			   }
	   }

	   //repetir password
	   function repPass(passrep){
		   debugger;
		   var pasvalid = inputpass.onblur();//contraseña usuario
		   var msg = passrep.parentElement.querySelectorAll("span")[1];
		   if(pasvalid === passrep.value){
				msg.style.color = "#4CAF50";
				msg.innerHTML = "Coincide";
		   }else{
				msg.style.color = "tomato";
				msg.innerHTML = "Password no coincide";
		   }
	   }


	   //caracteristicas del password
	   function validarPass(input){
		   var msgmin = input.parentElement.querySelectorAll("span")[1]; 
		   var msgmay = input.parentElement.querySelectorAll("span")[2];
		   var msgnum = input.parentElement.querySelectorAll("span")[3];
		   var msglett = input.parentElement.querySelectorAll("span")[4];
			   // validad minuscula
			   var lowLetter = /[a-z]/;
			   if(lowLetter.test(input.value)){
					msgmin.style.color = "tomato";
					msgmin.innerHTML = "";
			   }else{
					msgmin.innerHTML = "Incluye minusculas";

			   }
			   // validad mayuscula
			   var upperLetter = /[A-Z]/;
			   if(upperLetter.test(input.value)){
					msgmay.style.color = "tomato";
					msgmay.innerHTML = "";
			   }else{
					msgmay.innerHTML = "Incluye  mayusculas";
			   }
			   //validar numero
			   var number = /[0-9]\d/;
			   console.log(number.test(input.value));
			   if(number.test(input.value) > true){
				
					msgnum.innerHTML = "";
			   }else{
				msgnum.style.color = "tomato";
					msgnum.innerHTML = "Incluye algun numero";
			   }
			   // validar longitud
			   if(input.value.length >= 6 && input.value.length <= 15) {
					msglett.innerHTML = "";
			   }else{
					msglett.style.color ='tomato';
					msglett.innerHTML = "Entre 6 y 15 caracteres";
			   }
	
	   	}
		 
			 //funcion validar  campos del formulario
		   	function validaSubmit(ev) {
				var expemail = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/;
				var exppass = /(?=^.{6,15}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/;
				var pass = document.getElementById("pass");
				var repas = document.getElementById("repass");
				var mail = document.getElementById("email");
				var name = document.getElementById("nombre");
				var edad = document.getElementById("años");
				var check = document.getElementById("privacidad");
				var lastname = document.getElementById("apellido");

				if(mail.value.length == 0 || !expemail.test(mail.value) || expemail.test(mail.value)){ //si esta vacio y no es una expr regular
					alert("Revisa campo email.");
					ev.preventDefault(); // desabilita el submit y no envia el formulario
				}else if(pass.value.length == 0 || !exppass.test(pass.value) || exppass.test(pass.value)){ //si esta vacio y no es una expr regular
					alert("Revisa campo password.");
					ev.preventDefault(); // desabilita el submit y no envia el formulario
				}else if(repas.value.length == 0 || !exppass.test(repas.value) || exppass.test(repas.value)){
					alert("Revisa repeticion de password");
					ev.preventDefault(); // desabilita el submit y no envia el formulario
				}else if(name.value.length  < 3 || name.value.length > 15 ){
					alert("Revisa campo nombre 16 caracteres max.");
					ev.preventDefault();
				}else if(lastname.value.length < 5 ||  lastname.value.length > 50 ){
					alert("Revisa campo apellido 50 caracteres max.");
					ev.preventDefault();
				}else if(edad.value == ""){
					alert("revisa campo edad");
					ev.preventDefault();
				}else if(check.checked == false){
					alert("Acepta los terminos y condiciones");
					ev.preventDefault();
				}	
			}
		   
	   
</script>
</body>
</html>


